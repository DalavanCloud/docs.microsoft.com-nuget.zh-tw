---
title: 目錄資源，而 NuGet V3 API
description: 目錄是建立和刪除在 nuget.org 上的所有封裝的索引。
author: joelverhagen
ms.author: jver
ms.date: 10/30/2017
ms.topic: reference
ms.reviewer: kraigb
ms.openlocfilehash: d4c13200494ed3c6fa897ce0083a52c13688b44b
ms.sourcegitcommit: 1d1406764c6af5fb7801d462e0c4afc9092fa569
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/04/2018
ms.locfileid: "43547389"
---
# <a name="catalog"></a><span data-ttu-id="f18c9-103">Catalog</span><span class="sxs-lookup"><span data-stu-id="f18c9-103">Catalog</span></span>

<span data-ttu-id="f18c9-104">**目錄**是記錄上的套件來源，例如建立和刪除作業的所有封裝作業的資源。</span><span class="sxs-lookup"><span data-stu-id="f18c9-104">The **catalog** is a resource that records all package operations on a package source, such as creations and deletions.</span></span> <span data-ttu-id="f18c9-105">目錄資源有`Catalog`中輸入[服務索引](service-index.md)。</span><span class="sxs-lookup"><span data-stu-id="f18c9-105">The catalog resource has the `Catalog` type in the [service index](service-index.md).</span></span>

> [!Note]
> <span data-ttu-id="f18c9-106">目錄不官方 NuGet 用戶端使用，因為並非所有的套件來源實作類別目錄。</span><span class="sxs-lookup"><span data-stu-id="f18c9-106">Because the catalog is not used by the official NuGet client, not all package sources implement the catalog.</span></span>

> [!Note]
> <span data-ttu-id="f18c9-107">目前，nuget.org 目錄不在中國推出。</span><span class="sxs-lookup"><span data-stu-id="f18c9-107">Currently, the nuget.org catalog is not available in China.</span></span> <span data-ttu-id="f18c9-108">如需詳細資訊，請參閱 < [NuGet/NuGetGallery #4949](https://github.com/NuGet/NuGetGallery/issues/4949)。</span><span class="sxs-lookup"><span data-stu-id="f18c9-108">For more details, see [NuGet/NuGetGallery#4949](https://github.com/NuGet/NuGetGallery/issues/4949).</span></span>

## <a name="versioning"></a><span data-ttu-id="f18c9-109">版本控制</span><span class="sxs-lookup"><span data-stu-id="f18c9-109">Versioning</span></span>

<span data-ttu-id="f18c9-110">下列`@type`會使用值：</span><span class="sxs-lookup"><span data-stu-id="f18c9-110">The following `@type` value is used:</span></span>

<span data-ttu-id="f18c9-111">@type 值</span><span class="sxs-lookup"><span data-stu-id="f18c9-111">@type value</span></span>   | <span data-ttu-id="f18c9-112">注意</span><span class="sxs-lookup"><span data-stu-id="f18c9-112">Notes</span></span>
------------- | -----
<span data-ttu-id="f18c9-113">Catalog/3.0.0</span><span class="sxs-lookup"><span data-stu-id="f18c9-113">Catalog/3.0.0</span></span> | <span data-ttu-id="f18c9-114">初始版本</span><span class="sxs-lookup"><span data-stu-id="f18c9-114">The initial release</span></span>

## <a name="base-url"></a><span data-ttu-id="f18c9-115">基礎 URL</span><span class="sxs-lookup"><span data-stu-id="f18c9-115">Base URL</span></span>

<span data-ttu-id="f18c9-116">下列 Api 的進入點 URL 是 windows 7`@id`上述的資源相關聯的屬性`@type`值。</span><span class="sxs-lookup"><span data-stu-id="f18c9-116">The entry point URL for the following APIs is the value of the `@id` property associated with the aforementioned resource `@type` values.</span></span> <span data-ttu-id="f18c9-117">本主題使用的預留位置 URL `{@id}`。</span><span class="sxs-lookup"><span data-stu-id="f18c9-117">This topic uses the placeholder URL `{@id}`.</span></span>

## <a name="http-methods"></a><span data-ttu-id="f18c9-118">HTTP 方法</span><span class="sxs-lookup"><span data-stu-id="f18c9-118">HTTP methods</span></span>

<span data-ttu-id="f18c9-119">只有 HTTP 方法位於目錄資源支援的所有 Url`GET`和`HEAD`。</span><span class="sxs-lookup"><span data-stu-id="f18c9-119">All URLs found in the catalog resource support only the HTTP methods `GET` and `HEAD`.</span></span>

## <a name="catalog-index"></a><span data-ttu-id="f18c9-120">類別目錄索引</span><span class="sxs-lookup"><span data-stu-id="f18c9-120">Catalog index</span></span>

<span data-ttu-id="f18c9-121">類別目錄索引是有一份類別目錄項目，按照時間順序排列的已知位置中的文件。</span><span class="sxs-lookup"><span data-stu-id="f18c9-121">The catalog index is a document in a well-known location that has a list of catalog items, ordered chronologically.</span></span> <span data-ttu-id="f18c9-122">它是目錄資源的進入點。</span><span class="sxs-lookup"><span data-stu-id="f18c9-122">It is the entry point of the catalog resource.</span></span>

<span data-ttu-id="f18c9-123">索引是由目錄頁面所組成。</span><span class="sxs-lookup"><span data-stu-id="f18c9-123">The index is comprised of catalog pages.</span></span> <span data-ttu-id="f18c9-124">每個類別目錄 頁面包含類別目錄項目。</span><span class="sxs-lookup"><span data-stu-id="f18c9-124">Each catalog page contains catalog items.</span></span> <span data-ttu-id="f18c9-125">每個類別目錄項目表示有關單一封裝的某一點的時間的事件。</span><span class="sxs-lookup"><span data-stu-id="f18c9-125">Each catalog item represents an event concerning a single package at a point in time.</span></span> <span data-ttu-id="f18c9-126">類別目錄項目可以代表已建立、 未列出、 重新列入或刪除從套件來源的封裝。</span><span class="sxs-lookup"><span data-stu-id="f18c9-126">A catalog item can represent a package that was created, unlisted, relisted, or deleted from the package source.</span></span> <span data-ttu-id="f18c9-127">藉由處理類別目錄項目，依時間先後順序，用戶端可以建置 V3 封裝來源上存在的每個封裝的最新檢視。</span><span class="sxs-lookup"><span data-stu-id="f18c9-127">By processing the catalog items in chronological order, the client can build an up-to-date view of every package that exists on the V3 package source.</span></span>

<span data-ttu-id="f18c9-128">簡單地說，類別目錄的 blob 會有下列的階層式結構：</span><span class="sxs-lookup"><span data-stu-id="f18c9-128">In short, catalog blobs have the following hierarchical structure:</span></span>

- <span data-ttu-id="f18c9-129">**索引**： 類別目錄的進入點。</span><span class="sxs-lookup"><span data-stu-id="f18c9-129">**Index**: the entry point for the catalog.</span></span>
- <span data-ttu-id="f18c9-130">**頁面**： 類別目錄項目的群組。</span><span class="sxs-lookup"><span data-stu-id="f18c9-130">**Page**: a grouping of catalog items.</span></span>
- <span data-ttu-id="f18c9-131">**分葉**： 表示目錄項目，也就是單一封裝的狀態的快照集的文件。</span><span class="sxs-lookup"><span data-stu-id="f18c9-131">**Leaf**: a document representing a catalog item, which is a snapshot of a single package's state.</span></span>

<span data-ttu-id="f18c9-132">每個目錄物件具有名`commitTimeStamp`代表項目已新增至目錄。</span><span class="sxs-lookup"><span data-stu-id="f18c9-132">Each catalog object has a property called the `commitTimeStamp` representing when the item was added to the catalog.</span></span> <span data-ttu-id="f18c9-133">類別目錄項目會加入稱為認可的批次中的類別目錄 頁面。</span><span class="sxs-lookup"><span data-stu-id="f18c9-133">Catalog items are added to a catalog page in batches called commits.</span></span> <span data-ttu-id="f18c9-134">在相同認可中的所有類別目錄項目有相同的認可時間戳記 (`commitTimeStamp`) 並認可 ID (`commitId`)。</span><span class="sxs-lookup"><span data-stu-id="f18c9-134">All catalog items in the same commit have the same commit timestamp (`commitTimeStamp`) and commit ID (`commitId`).</span></span> <span data-ttu-id="f18c9-135">放在相同的認可中的類別目錄項目代表相同的點同時間發生的套件來源的事件。</span><span class="sxs-lookup"><span data-stu-id="f18c9-135">Catalog items placed in the same commit represent events that happened around the same point in time on the package source.</span></span> <span data-ttu-id="f18c9-136">目錄認可中沒有順序。</span><span class="sxs-lookup"><span data-stu-id="f18c9-136">There is no ordering within a catalog commit.</span></span>

<span data-ttu-id="f18c9-137">每個套件識別碼和版本是唯一的因為會永遠不會有一個以上的類別目錄項目中認可。</span><span class="sxs-lookup"><span data-stu-id="f18c9-137">Because each package ID and version is unique, there will never be more than one catalog item in a commit.</span></span> <span data-ttu-id="f18c9-138">這可確保，單一封裝的類別目錄項目可以一律會明確地排序認可時間戳記。</span><span class="sxs-lookup"><span data-stu-id="f18c9-138">This ensures that catalog items for a single package can always be unambiguously ordered with respect to commit timestamp.</span></span>

<span data-ttu-id="f18c9-139">沒有絕對不會以每個類別目錄的多個認可`commitTimeStamp`。</span><span class="sxs-lookup"><span data-stu-id="f18c9-139">There is never be more than one commit to the catalog per `commitTimeStamp`.</span></span> <span data-ttu-id="f18c9-140">亦即`commitId`是多餘的`commitTimeStamp`。</span><span class="sxs-lookup"><span data-stu-id="f18c9-140">In other words, the `commitId` is redundant with the `commitTimeStamp`.</span></span>

<span data-ttu-id="f18c9-141">相對於[套件中繼資料資源](registration-base-url-resource.md)、 其編製索引封裝識別碼、 類別目錄可索引 （和可查詢） 只依時間。</span><span class="sxs-lookup"><span data-stu-id="f18c9-141">In contrast to the [package metadata resource](registration-base-url-resource.md), which is indexed by package ID, the catalog is indexed (and queryable) only by time.</span></span>

<span data-ttu-id="f18c9-142">類別目錄項目會固定加入到單純遞增、 依時間先後順序中的類別目錄中。</span><span class="sxs-lookup"><span data-stu-id="f18c9-142">Catalog items are always added to the catalog in a monotonically increasing, chronological order.</span></span> <span data-ttu-id="f18c9-143">這表示，如果在時間 X 加入目錄認可則沒有任何目錄認可會不斷新增時間小於或等於 x。</span><span class="sxs-lookup"><span data-stu-id="f18c9-143">This means that if a catalog commit is added at time X then no catalog commit will ever be added with a time less than or equal to X.</span></span>

<span data-ttu-id="f18c9-144">下列要求擷取目錄索引。</span><span class="sxs-lookup"><span data-stu-id="f18c9-144">The following request fetches the catalog index.</span></span>

    GET {@id}

<span data-ttu-id="f18c9-145">類別目錄索引是 JSON 文件，其中包含具有下列屬性的物件：</span><span class="sxs-lookup"><span data-stu-id="f18c9-145">The catalog index is a JSON document that contains an object with the following properties:</span></span>

<span data-ttu-id="f18c9-146">名稱</span><span class="sxs-lookup"><span data-stu-id="f18c9-146">Name</span></span>            | <span data-ttu-id="f18c9-147">類型</span><span class="sxs-lookup"><span data-stu-id="f18c9-147">Type</span></span>             | <span data-ttu-id="f18c9-148">必要</span><span class="sxs-lookup"><span data-stu-id="f18c9-148">Required</span></span> | <span data-ttu-id="f18c9-149">注意</span><span class="sxs-lookup"><span data-stu-id="f18c9-149">Notes</span></span>
--------------- | ---------------- | -------- | -----
<span data-ttu-id="f18c9-150">commitId</span><span class="sxs-lookup"><span data-stu-id="f18c9-150">commitId</span></span>        | <span data-ttu-id="f18c9-151">字串</span><span class="sxs-lookup"><span data-stu-id="f18c9-151">string</span></span>           | <span data-ttu-id="f18c9-152">是</span><span class="sxs-lookup"><span data-stu-id="f18c9-152">yes</span></span>      | <span data-ttu-id="f18c9-153">使用最新認可相關聯的唯一識別碼</span><span class="sxs-lookup"><span data-stu-id="f18c9-153">A unique ID associated with the most recent commit</span></span>
<span data-ttu-id="f18c9-154">commitTimeStamp</span><span class="sxs-lookup"><span data-stu-id="f18c9-154">commitTimeStamp</span></span> | <span data-ttu-id="f18c9-155">字串</span><span class="sxs-lookup"><span data-stu-id="f18c9-155">string</span></span>           | <span data-ttu-id="f18c9-156">是</span><span class="sxs-lookup"><span data-stu-id="f18c9-156">yes</span></span>      | <span data-ttu-id="f18c9-157">最新的認可時間戳記</span><span class="sxs-lookup"><span data-stu-id="f18c9-157">A timestamp of the most recent commit</span></span>
<span data-ttu-id="f18c9-158">count</span><span class="sxs-lookup"><span data-stu-id="f18c9-158">count</span></span>           | <span data-ttu-id="f18c9-159">整數</span><span class="sxs-lookup"><span data-stu-id="f18c9-159">integer</span></span>          | <span data-ttu-id="f18c9-160">是</span><span class="sxs-lookup"><span data-stu-id="f18c9-160">yes</span></span>      | <span data-ttu-id="f18c9-161">在索引中的頁面數目</span><span class="sxs-lookup"><span data-stu-id="f18c9-161">The number of pages in the index</span></span>
<span data-ttu-id="f18c9-162">項目</span><span class="sxs-lookup"><span data-stu-id="f18c9-162">items</span></span>           | <span data-ttu-id="f18c9-163">物件的陣列</span><span class="sxs-lookup"><span data-stu-id="f18c9-163">array of objects</span></span> | <span data-ttu-id="f18c9-164">是</span><span class="sxs-lookup"><span data-stu-id="f18c9-164">yes</span></span>      | <span data-ttu-id="f18c9-165">物件的陣列，每個物件，表示頁面</span><span class="sxs-lookup"><span data-stu-id="f18c9-165">A array of objects, each object representing a page</span></span>

<span data-ttu-id="f18c9-166">在每個項目`items`陣列是具有一些關於每個頁面的最少詳細資料的物件。</span><span class="sxs-lookup"><span data-stu-id="f18c9-166">Each element in the `items` array is an object with some minimal details about each page.</span></span> <span data-ttu-id="f18c9-167">這些頁面物件不包含目錄分葉 （項目）。</span><span class="sxs-lookup"><span data-stu-id="f18c9-167">These page objects do not contain the catalog leaves (items).</span></span> <span data-ttu-id="f18c9-168">未定義此陣列中項目的順序。</span><span class="sxs-lookup"><span data-stu-id="f18c9-168">The order of the elements in this array is not defined.</span></span> <span data-ttu-id="f18c9-169">頁面可以依照中的記憶體使用的用戶端來排序其`commitTimeStamp`屬性。</span><span class="sxs-lookup"><span data-stu-id="f18c9-169">Pages can be ordered by the client in memory using their `commitTimeStamp` property.</span></span>

<span data-ttu-id="f18c9-170">引入新的頁面，`count`會遞增，而新的物件會出現在`items`陣列。</span><span class="sxs-lookup"><span data-stu-id="f18c9-170">As new pages are introduced, the `count` will be incremented and new objects will appear in the `items` array.</span></span>

<span data-ttu-id="f18c9-171">當項目新增至 「 類別目錄 」 索引的`commitId`會變更和`commitTimeStamp`會增加。</span><span class="sxs-lookup"><span data-stu-id="f18c9-171">As items are added to the catalog, the index's `commitId` will change and the `commitTimeStamp` will increase.</span></span> <span data-ttu-id="f18c9-172">這兩個屬性對所有的頁面會摘要基本上`commitId`並`commitTimeStamp`中的值`items`陣列。</span><span class="sxs-lookup"><span data-stu-id="f18c9-172">These two properties are essentially a summary over all page `commitId` and `commitTimeStamp` values in the `items` array.</span></span>

### <a name="catalog-page-object-in-the-index"></a><span data-ttu-id="f18c9-173">在索引中的目錄頁面物件</span><span class="sxs-lookup"><span data-stu-id="f18c9-173">Catalog page object in the index</span></span>

<span data-ttu-id="f18c9-174">類別目錄頁面上找到的物件類別目錄索引中`items`屬性具有下列屬性：</span><span class="sxs-lookup"><span data-stu-id="f18c9-174">The catalog page objects found in the catalog index's `items` property have the following properties:</span></span>

<span data-ttu-id="f18c9-175">名稱</span><span class="sxs-lookup"><span data-stu-id="f18c9-175">Name</span></span>            | <span data-ttu-id="f18c9-176">類型</span><span class="sxs-lookup"><span data-stu-id="f18c9-176">Type</span></span>    | <span data-ttu-id="f18c9-177">必要</span><span class="sxs-lookup"><span data-stu-id="f18c9-177">Required</span></span> | <span data-ttu-id="f18c9-178">注意</span><span class="sxs-lookup"><span data-stu-id="f18c9-178">Notes</span></span>
--------------- | ------- | -------- | -----
@id             | <span data-ttu-id="f18c9-179">字串</span><span class="sxs-lookup"><span data-stu-id="f18c9-179">string</span></span>  | <span data-ttu-id="f18c9-180">是</span><span class="sxs-lookup"><span data-stu-id="f18c9-180">yes</span></span>      | <span data-ttu-id="f18c9-181">要擷取類別目錄 頁面的 URL</span><span class="sxs-lookup"><span data-stu-id="f18c9-181">The URL to fetch catalog page</span></span>
<span data-ttu-id="f18c9-182">commitId</span><span class="sxs-lookup"><span data-stu-id="f18c9-182">commitId</span></span>        | <span data-ttu-id="f18c9-183">字串</span><span class="sxs-lookup"><span data-stu-id="f18c9-183">string</span></span>  | <span data-ttu-id="f18c9-184">是</span><span class="sxs-lookup"><span data-stu-id="f18c9-184">yes</span></span>      | <span data-ttu-id="f18c9-185">使用此頁面中的最新認可相關聯的唯一識別碼</span><span class="sxs-lookup"><span data-stu-id="f18c9-185">A unique ID associated with the most recent commit in this page</span></span>
<span data-ttu-id="f18c9-186">commitTimeStamp</span><span class="sxs-lookup"><span data-stu-id="f18c9-186">commitTimeStamp</span></span> | <span data-ttu-id="f18c9-187">字串</span><span class="sxs-lookup"><span data-stu-id="f18c9-187">string</span></span>  | <span data-ttu-id="f18c9-188">是</span><span class="sxs-lookup"><span data-stu-id="f18c9-188">yes</span></span>      | <span data-ttu-id="f18c9-189">在此頁面中的最新的認可時間戳記</span><span class="sxs-lookup"><span data-stu-id="f18c9-189">A timestamp of the most recent commit in this page</span></span>
<span data-ttu-id="f18c9-190">count</span><span class="sxs-lookup"><span data-stu-id="f18c9-190">count</span></span>           | <span data-ttu-id="f18c9-191">整數</span><span class="sxs-lookup"><span data-stu-id="f18c9-191">integer</span></span> | <span data-ttu-id="f18c9-192">是</span><span class="sxs-lookup"><span data-stu-id="f18c9-192">yes</span></span>      | <span data-ttu-id="f18c9-193">在 [目錄] 頁面中的項目數</span><span class="sxs-lookup"><span data-stu-id="f18c9-193">The number of items in the catalog page</span></span>

<span data-ttu-id="f18c9-194">相對於[套件中繼資料資源](registration-base-url-resource.md)在某些情況下，內嵌離開的索引、 目錄分葉會永遠不會內嵌於索引，並一律必須使用頁面提取`@id`URL。</span><span class="sxs-lookup"><span data-stu-id="f18c9-194">In contrast to the [package metadata resource](registration-base-url-resource.md) which in some cases inlines leaves into the index, catalog leaves are never inlined into the index and must always be fetched by using the page's `@id` URL.</span></span>

### <a name="sample-request"></a><span data-ttu-id="f18c9-195">範例要求</span><span class="sxs-lookup"><span data-stu-id="f18c9-195">Sample request</span></span>

    GET https://api.nuget.org/v3/catalog0/index.json

### <a name="sample-response"></a><span data-ttu-id="f18c9-196">範例回應</span><span class="sxs-lookup"><span data-stu-id="f18c9-196">Sample response</span></span>

[!code-JSON [catalog-index.json](./_data/catalog-index.json)]

## <a name="catalog-page"></a><span data-ttu-id="f18c9-197">類別目錄 頁面</span><span class="sxs-lookup"><span data-stu-id="f18c9-197">Catalog page</span></span>

<span data-ttu-id="f18c9-198">[目錄] 頁面是類別目錄項目的集合。</span><span class="sxs-lookup"><span data-stu-id="f18c9-198">The catalog page is a collection of catalog items.</span></span> <span data-ttu-id="f18c9-199">擷取使用其中一種文件`@id`目錄索引中找到的值。</span><span class="sxs-lookup"><span data-stu-id="f18c9-199">It is a document fetched using one of the `@id` values found in the catalog index.</span></span> <span data-ttu-id="f18c9-200">類別目錄 頁面的 URL 不是有可預測性，以及應該使用類別目錄索引中找到。</span><span class="sxs-lookup"><span data-stu-id="f18c9-200">The URL to a catalog page is not intended to be predictable and should be discovered using only the catalog index.</span></span>

<span data-ttu-id="f18c9-201">只能搭配最高的認可時間戳記類別目錄索引中的頁面，或到新的頁面，會加入新的類別目錄項目。</span><span class="sxs-lookup"><span data-stu-id="f18c9-201">New catalog items are added to the page in the catalog index only with the highest commit timestamp or to a new page.</span></span> <span data-ttu-id="f18c9-202">一旦具有較高的認可時間戳記的頁面新增至目錄時，較舊的頁面永遠不會加入或變更。</span><span class="sxs-lookup"><span data-stu-id="f18c9-202">Once a page with a higher commit timestamp is added to the catalog, older pages are never added to or changed.</span></span>

<span data-ttu-id="f18c9-203">類別目錄頁的文件是 JSON 物件，具有下列屬性：</span><span class="sxs-lookup"><span data-stu-id="f18c9-203">The catalog page document is a JSON object with the following properties:</span></span>

<span data-ttu-id="f18c9-204">名稱</span><span class="sxs-lookup"><span data-stu-id="f18c9-204">Name</span></span>            | <span data-ttu-id="f18c9-205">類型</span><span class="sxs-lookup"><span data-stu-id="f18c9-205">Type</span></span>             | <span data-ttu-id="f18c9-206">必要</span><span class="sxs-lookup"><span data-stu-id="f18c9-206">Required</span></span> | <span data-ttu-id="f18c9-207">注意</span><span class="sxs-lookup"><span data-stu-id="f18c9-207">Notes</span></span>
--------------- | ---------------- | -------- | -----
<span data-ttu-id="f18c9-208">commitId</span><span class="sxs-lookup"><span data-stu-id="f18c9-208">commitId</span></span>        | <span data-ttu-id="f18c9-209">字串</span><span class="sxs-lookup"><span data-stu-id="f18c9-209">string</span></span>           | <span data-ttu-id="f18c9-210">是</span><span class="sxs-lookup"><span data-stu-id="f18c9-210">yes</span></span>      | <span data-ttu-id="f18c9-211">使用此頁面中的最新認可相關聯的唯一識別碼</span><span class="sxs-lookup"><span data-stu-id="f18c9-211">A unique ID associated with the most recent commit in this page</span></span>
<span data-ttu-id="f18c9-212">commitTimeStamp</span><span class="sxs-lookup"><span data-stu-id="f18c9-212">commitTimeStamp</span></span> | <span data-ttu-id="f18c9-213">字串</span><span class="sxs-lookup"><span data-stu-id="f18c9-213">string</span></span>           | <span data-ttu-id="f18c9-214">是</span><span class="sxs-lookup"><span data-stu-id="f18c9-214">yes</span></span>      | <span data-ttu-id="f18c9-215">在此頁面中的最新的認可時間戳記</span><span class="sxs-lookup"><span data-stu-id="f18c9-215">A timestamp of the most recent commit in this page</span></span>
<span data-ttu-id="f18c9-216">count</span><span class="sxs-lookup"><span data-stu-id="f18c9-216">count</span></span>           | <span data-ttu-id="f18c9-217">整數</span><span class="sxs-lookup"><span data-stu-id="f18c9-217">integer</span></span>          | <span data-ttu-id="f18c9-218">是</span><span class="sxs-lookup"><span data-stu-id="f18c9-218">yes</span></span>      | <span data-ttu-id="f18c9-219">在頁面中的項目數</span><span class="sxs-lookup"><span data-stu-id="f18c9-219">The number of items in the page</span></span>
<span data-ttu-id="f18c9-220">項目</span><span class="sxs-lookup"><span data-stu-id="f18c9-220">items</span></span>           | <span data-ttu-id="f18c9-221">物件的陣列</span><span class="sxs-lookup"><span data-stu-id="f18c9-221">array of objects</span></span> | <span data-ttu-id="f18c9-222">是</span><span class="sxs-lookup"><span data-stu-id="f18c9-222">yes</span></span>      | <span data-ttu-id="f18c9-223">在此頁面中的類別目錄項目</span><span class="sxs-lookup"><span data-stu-id="f18c9-223">The catalog items in this page</span></span>
<span data-ttu-id="f18c9-224">父代</span><span class="sxs-lookup"><span data-stu-id="f18c9-224">parent</span></span>          | <span data-ttu-id="f18c9-225">字串</span><span class="sxs-lookup"><span data-stu-id="f18c9-225">string</span></span>           | <span data-ttu-id="f18c9-226">是</span><span class="sxs-lookup"><span data-stu-id="f18c9-226">yes</span></span>      | <span data-ttu-id="f18c9-227">類別目錄索引 URL</span><span class="sxs-lookup"><span data-stu-id="f18c9-227">A URL to the catalog index</span></span>

<span data-ttu-id="f18c9-228">在每個項目`items`陣列是具有一些最小類別目錄項目詳細資料的物件。</span><span class="sxs-lookup"><span data-stu-id="f18c9-228">Each element in the `items` array is an object with some minimal details about the catalog item.</span></span> <span data-ttu-id="f18c9-229">這些項目物件並包含所有目錄項目的資料。</span><span class="sxs-lookup"><span data-stu-id="f18c9-229">These item objects do not contain all of the catalog item's data.</span></span> <span data-ttu-id="f18c9-230">在頁面中的項目順序`items`陣列未定義。</span><span class="sxs-lookup"><span data-stu-id="f18c9-230">The order of the items in the page's `items` array is not defined.</span></span> <span data-ttu-id="f18c9-231">項目可以依照中的記憶體使用的用戶端來排序其`commitTimeStamp`屬性。</span><span class="sxs-lookup"><span data-stu-id="f18c9-231">Items can be ordered by the client in memory using their `commitTimeStamp` property.</span></span>

<span data-ttu-id="f18c9-232">在頁面中的類別目錄項目數目是由伺服器實作定義。</span><span class="sxs-lookup"><span data-stu-id="f18c9-232">The number of catalog items in a page is defined by server implementation.</span></span> <span data-ttu-id="f18c9-233">對於 nuget.org，最多 550 中沒有項目每個頁面上，不過實際數目的時間可能會更小，某些頁面，在下一步 認可批次的大小而定。</span><span class="sxs-lookup"><span data-stu-id="f18c9-233">For nuget.org, there are at most 550 items in each page, although the actual number may be smaller for some pages depending on the size of the next commit batch at the point in time.</span></span>

<span data-ttu-id="f18c9-234">引入新的項目，`count`是遞增的和新的類別目錄項目物件會出現在`items`陣列。</span><span class="sxs-lookup"><span data-stu-id="f18c9-234">As new items are introduced, the `count` is incremented and new catalog item objects appear in the `items` array.</span></span>

<span data-ttu-id="f18c9-235">當項目加入至頁面上，`commitId`變更和`commitTimeStamp`會增加。</span><span class="sxs-lookup"><span data-stu-id="f18c9-235">As items are added to the page, the `commitId` changes and the `commitTimeStamp` increases.</span></span> <span data-ttu-id="f18c9-236">這兩個屬性會摘要基本上所有`commitId`並`commitTimeStamp`中的值`items`陣列。</span><span class="sxs-lookup"><span data-stu-id="f18c9-236">These two properties are essentially a summary over all `commitId` and `commitTimeStamp` values in the `items` array.</span></span>

### <a name="catalog-item-object-in-a-page"></a><span data-ttu-id="f18c9-237">目錄項目頁面中的物件</span><span class="sxs-lookup"><span data-stu-id="f18c9-237">Catalog item object in a page</span></span>

<span data-ttu-id="f18c9-238">在 [目錄] 頁面中找到的類別目錄項目物件`items`屬性具有下列屬性：</span><span class="sxs-lookup"><span data-stu-id="f18c9-238">The catalog item objects found in the catalog page's `items` property have the following properties:</span></span>

<span data-ttu-id="f18c9-239">名稱</span><span class="sxs-lookup"><span data-stu-id="f18c9-239">Name</span></span>            | <span data-ttu-id="f18c9-240">類型</span><span class="sxs-lookup"><span data-stu-id="f18c9-240">Type</span></span>    | <span data-ttu-id="f18c9-241">必要</span><span class="sxs-lookup"><span data-stu-id="f18c9-241">Required</span></span> | <span data-ttu-id="f18c9-242">注意</span><span class="sxs-lookup"><span data-stu-id="f18c9-242">Notes</span></span>
--------------- | ------- | -------- | -----
@id             | <span data-ttu-id="f18c9-243">字串</span><span class="sxs-lookup"><span data-stu-id="f18c9-243">string</span></span>  | <span data-ttu-id="f18c9-244">是</span><span class="sxs-lookup"><span data-stu-id="f18c9-244">yes</span></span>      | <span data-ttu-id="f18c9-245">URL，以擷取目錄項目</span><span class="sxs-lookup"><span data-stu-id="f18c9-245">The URL to fetch the catalog item</span></span>
@type           | <span data-ttu-id="f18c9-246">字串</span><span class="sxs-lookup"><span data-stu-id="f18c9-246">string</span></span>  | <span data-ttu-id="f18c9-247">是</span><span class="sxs-lookup"><span data-stu-id="f18c9-247">yes</span></span>      | <span data-ttu-id="f18c9-248">類別目錄項目類型</span><span class="sxs-lookup"><span data-stu-id="f18c9-248">The type of the catalog item</span></span>
<span data-ttu-id="f18c9-249">commitId</span><span class="sxs-lookup"><span data-stu-id="f18c9-249">commitId</span></span>        | <span data-ttu-id="f18c9-250">字串</span><span class="sxs-lookup"><span data-stu-id="f18c9-250">string</span></span>  | <span data-ttu-id="f18c9-251">是</span><span class="sxs-lookup"><span data-stu-id="f18c9-251">yes</span></span>      | <span data-ttu-id="f18c9-252">此類別目錄項目相關聯的認可識別碼</span><span class="sxs-lookup"><span data-stu-id="f18c9-252">The commit ID associated with this catalog item</span></span>
<span data-ttu-id="f18c9-253">commitTimeStamp</span><span class="sxs-lookup"><span data-stu-id="f18c9-253">commitTimeStamp</span></span> | <span data-ttu-id="f18c9-254">字串</span><span class="sxs-lookup"><span data-stu-id="f18c9-254">string</span></span>  | <span data-ttu-id="f18c9-255">是</span><span class="sxs-lookup"><span data-stu-id="f18c9-255">yes</span></span>      | <span data-ttu-id="f18c9-256">這個類別目錄項目的認可時間戳記</span><span class="sxs-lookup"><span data-stu-id="f18c9-256">The commit timestamp of this catalog item</span></span>
<span data-ttu-id="f18c9-257">nuget:id</span><span class="sxs-lookup"><span data-stu-id="f18c9-257">nuget:id</span></span>        | <span data-ttu-id="f18c9-258">字串</span><span class="sxs-lookup"><span data-stu-id="f18c9-258">string</span></span>  | <span data-ttu-id="f18c9-259">是</span><span class="sxs-lookup"><span data-stu-id="f18c9-259">yes</span></span>      | <span data-ttu-id="f18c9-260">這個分葉與套件識別碼</span><span class="sxs-lookup"><span data-stu-id="f18c9-260">The package ID that this leaf is related to</span></span>
<span data-ttu-id="f18c9-261">nuget:version</span><span class="sxs-lookup"><span data-stu-id="f18c9-261">nuget:version</span></span>   | <span data-ttu-id="f18c9-262">字串</span><span class="sxs-lookup"><span data-stu-id="f18c9-262">string</span></span>  | <span data-ttu-id="f18c9-263">是</span><span class="sxs-lookup"><span data-stu-id="f18c9-263">yes</span></span>      | <span data-ttu-id="f18c9-264">與這個分葉套件版本</span><span class="sxs-lookup"><span data-stu-id="f18c9-264">The package version that this leaf is related to</span></span>

<span data-ttu-id="f18c9-265">`@type`值將會是下列兩個值之一：</span><span class="sxs-lookup"><span data-stu-id="f18c9-265">The `@type` value will be one of the following two values:</span></span>

1. <span data-ttu-id="f18c9-266">`nuget:PackageDetails`： 這會對應至`PackageDetails`目錄分葉文件中的型別。</span><span class="sxs-lookup"><span data-stu-id="f18c9-266">`nuget:PackageDetails`: this corresponds to `PackageDetails` type in the catalog leaf document.</span></span>
1. <span data-ttu-id="f18c9-267">`nuget:PackageDelete`： 這會對應至`PackageDelete`目錄分葉文件中的型別。</span><span class="sxs-lookup"><span data-stu-id="f18c9-267">`nuget:PackageDelete`: this corresponds to the `PackageDelete` type in the catalog leaf document.</span></span>

<span data-ttu-id="f18c9-268">如需詳細資訊，每個類型所代表的意義，請參閱[對應項目型別](#item-types)如下。</span><span class="sxs-lookup"><span data-stu-id="f18c9-268">For more details about what each type means, see the [corresponding items type](#item-types) below.</span></span>

### <a name="sample-request"></a><span data-ttu-id="f18c9-269">範例要求</span><span class="sxs-lookup"><span data-stu-id="f18c9-269">Sample request</span></span>

    GET https://api.nuget.org/v3/catalog0/page2926.json

### <a name="sample-response"></a><span data-ttu-id="f18c9-270">範例回應</span><span class="sxs-lookup"><span data-stu-id="f18c9-270">Sample response</span></span>

[!code-JSON [catalog-page.json](./_data/catalog-page.json)]

## <a name="catalog-leaf"></a><span data-ttu-id="f18c9-271">目錄分葉</span><span class="sxs-lookup"><span data-stu-id="f18c9-271">Catalog leaf</span></span>

<span data-ttu-id="f18c9-272">目錄分葉會包含特定的套件識別碼和版本，在某個時間點的相關中繼資料的時間。</span><span class="sxs-lookup"><span data-stu-id="f18c9-272">The catalog leaf contains metadata about a specific package ID and version at some point in time.</span></span> <span data-ttu-id="f18c9-273">它是使用文件`@id`類別目錄 頁面中找到的值。</span><span class="sxs-lookup"><span data-stu-id="f18c9-273">It is a document fetched using the `@id` value found in a catalog page.</span></span> <span data-ttu-id="f18c9-274">目錄分葉的 URL 不是有可預測性，而且應該使用只有類別目錄 頁面中找到。</span><span class="sxs-lookup"><span data-stu-id="f18c9-274">The URL to a catalog leaf is not intended to be predictable and should be discovered using only a catalog page.</span></span>

<span data-ttu-id="f18c9-275">目錄分葉文件是 JSON 物件，具有下列屬性：</span><span class="sxs-lookup"><span data-stu-id="f18c9-275">The catalog leaf document is a JSON object with the following properties:</span></span>

<span data-ttu-id="f18c9-276">名稱</span><span class="sxs-lookup"><span data-stu-id="f18c9-276">Name</span></span>                    | <span data-ttu-id="f18c9-277">類型</span><span class="sxs-lookup"><span data-stu-id="f18c9-277">Type</span></span>                       | <span data-ttu-id="f18c9-278">必要</span><span class="sxs-lookup"><span data-stu-id="f18c9-278">Required</span></span> | <span data-ttu-id="f18c9-279">注意</span><span class="sxs-lookup"><span data-stu-id="f18c9-279">Notes</span></span>
----------------------- | -------------------------- | -------- | -----
@type                   | <span data-ttu-id="f18c9-280">字串或字串陣列</span><span class="sxs-lookup"><span data-stu-id="f18c9-280">string or array of strings</span></span> | <span data-ttu-id="f18c9-281">是</span><span class="sxs-lookup"><span data-stu-id="f18c9-281">yes</span></span>      | <span data-ttu-id="f18c9-282">目錄項目的型別</span><span class="sxs-lookup"><span data-stu-id="f18c9-282">The type(s) of the catalog item</span></span>
<span data-ttu-id="f18c9-283">catalog:commitId</span><span class="sxs-lookup"><span data-stu-id="f18c9-283">catalog:commitId</span></span>        | <span data-ttu-id="f18c9-284">字串</span><span class="sxs-lookup"><span data-stu-id="f18c9-284">string</span></span>                     | <span data-ttu-id="f18c9-285">是</span><span class="sxs-lookup"><span data-stu-id="f18c9-285">yes</span></span>      | <span data-ttu-id="f18c9-286">此類別目錄項目相關聯的認可識別碼</span><span class="sxs-lookup"><span data-stu-id="f18c9-286">A commit ID associated with this catalog item</span></span>
<span data-ttu-id="f18c9-287">catalog:commitTimeStamp</span><span class="sxs-lookup"><span data-stu-id="f18c9-287">catalog:commitTimeStamp</span></span> | <span data-ttu-id="f18c9-288">字串</span><span class="sxs-lookup"><span data-stu-id="f18c9-288">string</span></span>                     | <span data-ttu-id="f18c9-289">是</span><span class="sxs-lookup"><span data-stu-id="f18c9-289">yes</span></span>      | <span data-ttu-id="f18c9-290">這個類別目錄項目的認可時間戳記</span><span class="sxs-lookup"><span data-stu-id="f18c9-290">The commit timestamp of this catalog item</span></span>
<span data-ttu-id="f18c9-291">id</span><span class="sxs-lookup"><span data-stu-id="f18c9-291">id</span></span>                      | <span data-ttu-id="f18c9-292">字串</span><span class="sxs-lookup"><span data-stu-id="f18c9-292">string</span></span>                     | <span data-ttu-id="f18c9-293">是</span><span class="sxs-lookup"><span data-stu-id="f18c9-293">yes</span></span>      | <span data-ttu-id="f18c9-294">類別目錄項目之封裝 ID</span><span class="sxs-lookup"><span data-stu-id="f18c9-294">The package ID of the catalog item</span></span>
<span data-ttu-id="f18c9-295">發行</span><span class="sxs-lookup"><span data-stu-id="f18c9-295">published</span></span>               | <span data-ttu-id="f18c9-296">字串</span><span class="sxs-lookup"><span data-stu-id="f18c9-296">string</span></span>                     | <span data-ttu-id="f18c9-297">是</span><span class="sxs-lookup"><span data-stu-id="f18c9-297">yes</span></span>      | <span data-ttu-id="f18c9-298">封裝的目錄項目的發佈的日期</span><span class="sxs-lookup"><span data-stu-id="f18c9-298">The published date of the package catalog item</span></span>
<span data-ttu-id="f18c9-299">版本</span><span class="sxs-lookup"><span data-stu-id="f18c9-299">version</span></span>                 | <span data-ttu-id="f18c9-300">字串</span><span class="sxs-lookup"><span data-stu-id="f18c9-300">string</span></span>                     | <span data-ttu-id="f18c9-301">是</span><span class="sxs-lookup"><span data-stu-id="f18c9-301">yes</span></span>      | <span data-ttu-id="f18c9-302">封裝版本的類別目錄項目</span><span class="sxs-lookup"><span data-stu-id="f18c9-302">The package version of the catalog item</span></span>

### <a name="item-types"></a><span data-ttu-id="f18c9-303">項目類型</span><span class="sxs-lookup"><span data-stu-id="f18c9-303">Item types</span></span>

<span data-ttu-id="f18c9-304">`@type`屬性是字串陣列。</span><span class="sxs-lookup"><span data-stu-id="f18c9-304">The `@type` property is a string or array of strings.</span></span> <span data-ttu-id="f18c9-305">為了方便起見，如果`@type`值是字串，它應該會被視為一個大小的任何陣列。</span><span class="sxs-lookup"><span data-stu-id="f18c9-305">For convenience, if the `@type` value is a string, it should be treated as any array of size one.</span></span> <span data-ttu-id="f18c9-306">並非所有可能的值，如`@type`記載。</span><span class="sxs-lookup"><span data-stu-id="f18c9-306">Not all possible values for `@type` are documented.</span></span> <span data-ttu-id="f18c9-307">不過，每個類別目錄項目有一個是兩個下列字串類型值：</span><span class="sxs-lookup"><span data-stu-id="f18c9-307">However, each catalog item has exactly one of the two following string type values:</span></span>

1. <span data-ttu-id="f18c9-308">`PackageDetails`： 代表套件中繼資料的快照集</span><span class="sxs-lookup"><span data-stu-id="f18c9-308">`PackageDetails`: represents a snapshot of package metadata</span></span>
1. <span data-ttu-id="f18c9-309">`PackageDelete`： 表示已刪除的套件</span><span class="sxs-lookup"><span data-stu-id="f18c9-309">`PackageDelete`: represents a package that was deleted</span></span>

### <a name="package-details-catalog-items"></a><span data-ttu-id="f18c9-310">套件詳細資料類別目錄項目</span><span class="sxs-lookup"><span data-stu-id="f18c9-310">Package details catalog items</span></span>

<span data-ttu-id="f18c9-311">類別目錄項目類型`PackageDetails`包含特定套件 （識別碼和版本組合） 的套件中繼資料的快照集。</span><span class="sxs-lookup"><span data-stu-id="f18c9-311">Catalog items with the type `PackageDetails` contain a snapshot of package metadata for a specific package (ID and version combination).</span></span> <span data-ttu-id="f18c9-312">當封裝來源中遇到下列情況下，則會產生套件詳細資料的類別目錄項目：</span><span class="sxs-lookup"><span data-stu-id="f18c9-312">A package details catalog item is produced when a package source encounters any of the following scenarios:</span></span>

1. <span data-ttu-id="f18c9-313">封裝是**推送**。</span><span class="sxs-lookup"><span data-stu-id="f18c9-313">A package is **pushed**.</span></span>
1. <span data-ttu-id="f18c9-314">封裝是**列出**。</span><span class="sxs-lookup"><span data-stu-id="f18c9-314">A package is **listed**.</span></span>
1. <span data-ttu-id="f18c9-315">封裝是**未列出**。</span><span class="sxs-lookup"><span data-stu-id="f18c9-315">A package is **unlisted**.</span></span>
1. <span data-ttu-id="f18c9-316">封裝是**reflowed**。</span><span class="sxs-lookup"><span data-stu-id="f18c9-316">A package is **reflowed**.</span></span>

<span data-ttu-id="f18c9-317">封裝自動重排是基本上會產生封裝本身而不需變更現有封裝的假發送系統管理動作。</span><span class="sxs-lookup"><span data-stu-id="f18c9-317">A package reflow is an administrative gesture that essentially generates a fake push of an existing package with no changes to the package itself.</span></span> <span data-ttu-id="f18c9-318">在 nuget.org 上，自動重排之後修正 bug，其中一個背景工作使用的目錄中使用。</span><span class="sxs-lookup"><span data-stu-id="f18c9-318">On nuget.org, a reflow is used after fixing a bug in one of the background jobs which consume the catalog.</span></span>

<span data-ttu-id="f18c9-319">用戶端使用的目錄項目不應該嘗試判斷哪一種案例所產生的類別目錄項目。</span><span class="sxs-lookup"><span data-stu-id="f18c9-319">Clients consuming the catalog items should not attempt to determine which of these scenarios produced the catalog item.</span></span> <span data-ttu-id="f18c9-320">相反地，用戶端應該只需維護或的任何檢視索引以更新類別目錄項目中包含的中繼資料。</span><span class="sxs-lookup"><span data-stu-id="f18c9-320">Instead, the client should simply update any maintained view or index with the metadata contained in the catalog item.</span></span> <span data-ttu-id="f18c9-321">此外，重複或冗餘的類別目錄項目應該會正常地處理 （以等冪方式）。</span><span class="sxs-lookup"><span data-stu-id="f18c9-321">Furthermore, duplicate or redundant catalog items should be handled gracefully (idempotently).</span></span>

<span data-ttu-id="f18c9-322">封裝詳細資料的目錄項目具有下列屬性以外[包含在所有的目錄分葉](#catalog-leaf)。</span><span class="sxs-lookup"><span data-stu-id="f18c9-322">Package details catalog items have the following properties in addition to those [included on all catalog leaves](#catalog-leaf).</span></span>

<span data-ttu-id="f18c9-323">名稱</span><span class="sxs-lookup"><span data-stu-id="f18c9-323">Name</span></span>                    | <span data-ttu-id="f18c9-324">類型</span><span class="sxs-lookup"><span data-stu-id="f18c9-324">Type</span></span>                       | <span data-ttu-id="f18c9-325">必要</span><span class="sxs-lookup"><span data-stu-id="f18c9-325">Required</span></span> | <span data-ttu-id="f18c9-326">注意</span><span class="sxs-lookup"><span data-stu-id="f18c9-326">Notes</span></span>
----------------------- | -------------------------- | -------- | -----
<span data-ttu-id="f18c9-327">authors</span><span class="sxs-lookup"><span data-stu-id="f18c9-327">authors</span></span>                 | <span data-ttu-id="f18c9-328">字串</span><span class="sxs-lookup"><span data-stu-id="f18c9-328">string</span></span>                     | <span data-ttu-id="f18c9-329">否</span><span class="sxs-lookup"><span data-stu-id="f18c9-329">no</span></span>       |
<span data-ttu-id="f18c9-330">created</span><span class="sxs-lookup"><span data-stu-id="f18c9-330">created</span></span>                 | <span data-ttu-id="f18c9-331">字串</span><span class="sxs-lookup"><span data-stu-id="f18c9-331">string</span></span>                     | <span data-ttu-id="f18c9-332">否</span><span class="sxs-lookup"><span data-stu-id="f18c9-332">no</span></span>       | <span data-ttu-id="f18c9-333">第一次建立封裝時的時間戳記。</span><span class="sxs-lookup"><span data-stu-id="f18c9-333">A timestamp of when the package was first created.</span></span> <span data-ttu-id="f18c9-334">後援屬性： `published`。</span><span class="sxs-lookup"><span data-stu-id="f18c9-334">Fallback property: `published`.</span></span>
<span data-ttu-id="f18c9-335">dependencyGroups</span><span class="sxs-lookup"><span data-stu-id="f18c9-335">dependencyGroups</span></span>        | <span data-ttu-id="f18c9-336">物件的陣列</span><span class="sxs-lookup"><span data-stu-id="f18c9-336">array of objects</span></span>           | <span data-ttu-id="f18c9-337">否</span><span class="sxs-lookup"><span data-stu-id="f18c9-337">no</span></span>       | <span data-ttu-id="f18c9-338">相同的格式設定為[套件中繼資料資源](registration-base-url-resource.md#package-dependency-group)</span><span class="sxs-lookup"><span data-stu-id="f18c9-338">Same format as the [package metadata resource](registration-base-url-resource.md#package-dependency-group)</span></span>
<span data-ttu-id="f18c9-339">描述</span><span class="sxs-lookup"><span data-stu-id="f18c9-339">description</span></span>             | <span data-ttu-id="f18c9-340">字串</span><span class="sxs-lookup"><span data-stu-id="f18c9-340">string</span></span>                     | <span data-ttu-id="f18c9-341">否</span><span class="sxs-lookup"><span data-stu-id="f18c9-341">no</span></span>       |
<span data-ttu-id="f18c9-342">iconUrl</span><span class="sxs-lookup"><span data-stu-id="f18c9-342">iconUrl</span></span>                 | <span data-ttu-id="f18c9-343">字串</span><span class="sxs-lookup"><span data-stu-id="f18c9-343">string</span></span>                     | <span data-ttu-id="f18c9-344">否</span><span class="sxs-lookup"><span data-stu-id="f18c9-344">no</span></span>       |
<span data-ttu-id="f18c9-345">isPrerelease</span><span class="sxs-lookup"><span data-stu-id="f18c9-345">isPrerelease</span></span>            | <span data-ttu-id="f18c9-346">boolean</span><span class="sxs-lookup"><span data-stu-id="f18c9-346">boolean</span></span>                    | <span data-ttu-id="f18c9-347">否</span><span class="sxs-lookup"><span data-stu-id="f18c9-347">no</span></span>       | <span data-ttu-id="f18c9-348">Zda bude 封裝版本是發行前版本。</span><span class="sxs-lookup"><span data-stu-id="f18c9-348">Whether or not the package version is prerelease.</span></span> <span data-ttu-id="f18c9-349">可以偵測到從`version`。</span><span class="sxs-lookup"><span data-stu-id="f18c9-349">Can be detected from `version`.</span></span>
<span data-ttu-id="f18c9-350">語言</span><span class="sxs-lookup"><span data-stu-id="f18c9-350">language</span></span>                | <span data-ttu-id="f18c9-351">字串</span><span class="sxs-lookup"><span data-stu-id="f18c9-351">string</span></span>                     | <span data-ttu-id="f18c9-352">否</span><span class="sxs-lookup"><span data-stu-id="f18c9-352">no</span></span>       |
<span data-ttu-id="f18c9-353">licenseUrl</span><span class="sxs-lookup"><span data-stu-id="f18c9-353">licenseUrl</span></span>              | <span data-ttu-id="f18c9-354">字串</span><span class="sxs-lookup"><span data-stu-id="f18c9-354">string</span></span>                     | <span data-ttu-id="f18c9-355">否</span><span class="sxs-lookup"><span data-stu-id="f18c9-355">no</span></span>       |
<span data-ttu-id="f18c9-356">列出的</span><span class="sxs-lookup"><span data-stu-id="f18c9-356">listed</span></span>                  | <span data-ttu-id="f18c9-357">boolean</span><span class="sxs-lookup"><span data-stu-id="f18c9-357">boolean</span></span>                    | <span data-ttu-id="f18c9-358">否</span><span class="sxs-lookup"><span data-stu-id="f18c9-358">no</span></span>       | <span data-ttu-id="f18c9-359">與封裝是否列出</span><span class="sxs-lookup"><span data-stu-id="f18c9-359">Whether or not the package is listed</span></span>
<span data-ttu-id="f18c9-360">minClientVersion</span><span class="sxs-lookup"><span data-stu-id="f18c9-360">minClientVersion</span></span>        | <span data-ttu-id="f18c9-361">字串</span><span class="sxs-lookup"><span data-stu-id="f18c9-361">string</span></span>                     | <span data-ttu-id="f18c9-362">否</span><span class="sxs-lookup"><span data-stu-id="f18c9-362">no</span></span>       |
<span data-ttu-id="f18c9-363">packageHash</span><span class="sxs-lookup"><span data-stu-id="f18c9-363">packageHash</span></span>             | <span data-ttu-id="f18c9-364">字串</span><span class="sxs-lookup"><span data-stu-id="f18c9-364">string</span></span>                     | <span data-ttu-id="f18c9-365">是</span><span class="sxs-lookup"><span data-stu-id="f18c9-365">yes</span></span>      | <span data-ttu-id="f18c9-366">封裝，使用編碼的雜湊[標準的 base 64](https://tools.ietf.org/html/rfc4648#section-4)</span><span class="sxs-lookup"><span data-stu-id="f18c9-366">The hash of the package, encoding using [standard base 64](https://tools.ietf.org/html/rfc4648#section-4)</span></span>
<span data-ttu-id="f18c9-367">packageHashAlgorithm</span><span class="sxs-lookup"><span data-stu-id="f18c9-367">packageHashAlgorithm</span></span>    | <span data-ttu-id="f18c9-368">字串</span><span class="sxs-lookup"><span data-stu-id="f18c9-368">string</span></span>                     | <span data-ttu-id="f18c9-369">是</span><span class="sxs-lookup"><span data-stu-id="f18c9-369">yes</span></span>      |
<span data-ttu-id="f18c9-370">packageSize</span><span class="sxs-lookup"><span data-stu-id="f18c9-370">packageSize</span></span>             | <span data-ttu-id="f18c9-371">整數</span><span class="sxs-lookup"><span data-stu-id="f18c9-371">integer</span></span>                    | <span data-ttu-id="f18c9-372">是</span><span class="sxs-lookup"><span data-stu-id="f18c9-372">yes</span></span>      | <span data-ttu-id="f18c9-373">套件.nupkg，以位元組為單位的大小</span><span class="sxs-lookup"><span data-stu-id="f18c9-373">The size of the package .nupkg in bytes</span></span>
<span data-ttu-id="f18c9-374">projectUrl</span><span class="sxs-lookup"><span data-stu-id="f18c9-374">projectUrl</span></span>              | <span data-ttu-id="f18c9-375">字串</span><span class="sxs-lookup"><span data-stu-id="f18c9-375">string</span></span>                     | <span data-ttu-id="f18c9-376">否</span><span class="sxs-lookup"><span data-stu-id="f18c9-376">no</span></span>       |
<span data-ttu-id="f18c9-377">releaseNotes</span><span class="sxs-lookup"><span data-stu-id="f18c9-377">releaseNotes</span></span>            | <span data-ttu-id="f18c9-378">字串</span><span class="sxs-lookup"><span data-stu-id="f18c9-378">string</span></span>                     | <span data-ttu-id="f18c9-379">否</span><span class="sxs-lookup"><span data-stu-id="f18c9-379">no</span></span>       |
<span data-ttu-id="f18c9-380">requireLicenseAgreement</span><span class="sxs-lookup"><span data-stu-id="f18c9-380">requireLicenseAgreement</span></span> | <span data-ttu-id="f18c9-381">boolean</span><span class="sxs-lookup"><span data-stu-id="f18c9-381">boolean</span></span>                    | <span data-ttu-id="f18c9-382">否</span><span class="sxs-lookup"><span data-stu-id="f18c9-382">no</span></span>       | <span data-ttu-id="f18c9-383">假設`false`如果排除</span><span class="sxs-lookup"><span data-stu-id="f18c9-383">Assume `false` if excluded</span></span>
<span data-ttu-id="f18c9-384">摘要</span><span class="sxs-lookup"><span data-stu-id="f18c9-384">summary</span></span>                 | <span data-ttu-id="f18c9-385">字串</span><span class="sxs-lookup"><span data-stu-id="f18c9-385">string</span></span>                     | <span data-ttu-id="f18c9-386">否</span><span class="sxs-lookup"><span data-stu-id="f18c9-386">no</span></span>       |
<span data-ttu-id="f18c9-387">標記</span><span class="sxs-lookup"><span data-stu-id="f18c9-387">tags</span></span>                    | <span data-ttu-id="f18c9-388">字串陣列</span><span class="sxs-lookup"><span data-stu-id="f18c9-388">array of strings</span></span>           | <span data-ttu-id="f18c9-389">否</span><span class="sxs-lookup"><span data-stu-id="f18c9-389">no</span></span>       |
<span data-ttu-id="f18c9-390">標題</span><span class="sxs-lookup"><span data-stu-id="f18c9-390">title</span></span>                   | <span data-ttu-id="f18c9-391">字串</span><span class="sxs-lookup"><span data-stu-id="f18c9-391">string</span></span>                     | <span data-ttu-id="f18c9-392">否</span><span class="sxs-lookup"><span data-stu-id="f18c9-392">no</span></span>       |
<span data-ttu-id="f18c9-393">verbatimVersion</span><span class="sxs-lookup"><span data-stu-id="f18c9-393">verbatimVersion</span></span>         | <span data-ttu-id="f18c9-394">字串</span><span class="sxs-lookup"><span data-stu-id="f18c9-394">string</span></span>                     | <span data-ttu-id="f18c9-395">否</span><span class="sxs-lookup"><span data-stu-id="f18c9-395">no</span></span>       | <span data-ttu-id="f18c9-396">版本字串，因為它原本位於.nuspec</span><span class="sxs-lookup"><span data-stu-id="f18c9-396">The version string as it's originally found in the .nuspec</span></span>

<span data-ttu-id="f18c9-397">封裝`version`屬性是完整的正規化版本字串。</span><span class="sxs-lookup"><span data-stu-id="f18c9-397">The package `version` property is the full, normalized version string.</span></span> <span data-ttu-id="f18c9-398">也就是說，SemVer 2.0.0 組建資料可能包含以下項目。</span><span class="sxs-lookup"><span data-stu-id="f18c9-398">This means that SemVer 2.0.0 build data can be included here.</span></span>

<span data-ttu-id="f18c9-399">`created`封裝來源，通常是短時間類別目錄項目的認可時間戳記之前先收到封裝時，時間戳記。</span><span class="sxs-lookup"><span data-stu-id="f18c9-399">The `created` timestamp is when the package was first received by the package source, which is typically a short time before the catalog item's commit timestamp.</span></span>

<span data-ttu-id="f18c9-400">`packageHashAlgorithm`是伺服器實作，其代表用來產生的雜湊演算法所定義的字串`packageHash`。</span><span class="sxs-lookup"><span data-stu-id="f18c9-400">The `packageHashAlgorithm` is a string defined by the server implementation representing the hashing algorithm used to produce the `packageHash`.</span></span> <span data-ttu-id="f18c9-401">一律會使用 nuget.org`packageHashAlgorithm`的值`SHA512`。</span><span class="sxs-lookup"><span data-stu-id="f18c9-401">nuget.org always used the `packageHashAlgorithm` value of `SHA512`.</span></span>

<span data-ttu-id="f18c9-402">`published`時間戳記是上次列出封裝時的時間。</span><span class="sxs-lookup"><span data-stu-id="f18c9-402">The `published` timestamp is the time when the package was last listed.</span></span>

> [!Note]
> <span data-ttu-id="f18c9-403">在 nuget.org 上，`published`值設定為當套件很未列出的 1900 年。</span><span class="sxs-lookup"><span data-stu-id="f18c9-403">On nuget.org, the `published` value is set to the year 1900 when the package is unlisted.</span></span>

#### <a name="sample-request"></a><span data-ttu-id="f18c9-404">範例要求</span><span class="sxs-lookup"><span data-stu-id="f18c9-404">Sample request</span></span>

<span data-ttu-id="f18c9-405">取得 https://api.nuget.org/v3/catalog0/data/2015.02.01.11.18.40/windowsazure.storage.1.0.0.json</span><span class="sxs-lookup"><span data-stu-id="f18c9-405">GET https://api.nuget.org/v3/catalog0/data/2015.02.01.11.18.40/windowsazure.storage.1.0.0.json</span></span>

#### <a name="sample-response"></a><span data-ttu-id="f18c9-406">範例回應</span><span class="sxs-lookup"><span data-stu-id="f18c9-406">Sample response</span></span>

[!code-JSON [catalog-package-details.json](./_data/catalog-package-details.json)]

### <a name="package-delete-catalog-items"></a><span data-ttu-id="f18c9-407">套件刪除目錄項目</span><span class="sxs-lookup"><span data-stu-id="f18c9-407">Package delete catalog items</span></span>

<span data-ttu-id="f18c9-408">類別目錄項目類型`PackageDelete`包含資訊指出目錄用戶端封裝已從套件來源中刪除，而且已無法再使用 （例如還原） 的任何封裝作業的最少。</span><span class="sxs-lookup"><span data-stu-id="f18c9-408">Catalog items with the type `PackageDelete` contain a minimal set of information indicating to catalog clients that a package has been deleted from the package source and is no longer available for any package operation (such as restore).</span></span>

> [!Note]
> <span data-ttu-id="f18c9-409">很可能要刪除的套件和更新版本發佈使用相同的套件識別碼和版本。</span><span class="sxs-lookup"><span data-stu-id="f18c9-409">It is possible for a package to be deleted and later republished using the same package ID and version.</span></span> <span data-ttu-id="f18c9-410">在 nuget.org 上，這是非常罕見的情況下，中斷套件識別碼和版本代表特定的套件內容的官方用戶端的假設。</span><span class="sxs-lookup"><span data-stu-id="f18c9-410">On nuget.org, this is a very rare case as it breaks the official client's assumption that a package ID and version imply a specific package content.</span></span> <span data-ttu-id="f18c9-411">在 nuget.org 上刪除封裝的相關資訊，請參閱[我們的原則](../policies/deleting-packages.md)。</span><span class="sxs-lookup"><span data-stu-id="f18c9-411">For more information about package deletion on nuget.org, see [our policy](../policies/deleting-packages.md).</span></span>

<span data-ttu-id="f18c9-412">套件刪除目錄項目沒有任何額外的屬性，除了[包含在所有的目錄分葉](#catalog-leaf)。</span><span class="sxs-lookup"><span data-stu-id="f18c9-412">Package delete catalog items have no additional properties in addition to those [included on all catalog leaves](#catalog-leaf).</span></span>

<span data-ttu-id="f18c9-413">`version`屬性是封裝.nuspec 中找到的原始版本字串。</span><span class="sxs-lookup"><span data-stu-id="f18c9-413">The `version` property is the original version string found in the package .nuspec.</span></span>

<span data-ttu-id="f18c9-414">`published`屬性是封裝已刪除時，通常是做為類別目錄項目的認可時間戳記之前的短時間的時間。</span><span class="sxs-lookup"><span data-stu-id="f18c9-414">The `published` property is the time when package was deleted, which is typically as short time before the catalog item's commit timestamp.</span></span>

#### <a name="sample-request"></a><span data-ttu-id="f18c9-415">範例要求</span><span class="sxs-lookup"><span data-stu-id="f18c9-415">Sample request</span></span>

<span data-ttu-id="f18c9-416">取得 https://api.nuget.org/v3/catalog0/data/2017.11.02.00.40.00/netstandard1.4_lib.1.0.0-test.json</span><span class="sxs-lookup"><span data-stu-id="f18c9-416">GET https://api.nuget.org/v3/catalog0/data/2017.11.02.00.40.00/netstandard1.4_lib.1.0.0-test.json</span></span>

#### <a name="sample-response"></a><span data-ttu-id="f18c9-417">範例回應</span><span class="sxs-lookup"><span data-stu-id="f18c9-417">Sample response</span></span>

[!code-JSON [catalog-package-delete.json](./_data/catalog-package-delete.json)]

## <a name="cursor"></a><span data-ttu-id="f18c9-418">Cursor</span><span class="sxs-lookup"><span data-stu-id="f18c9-418">Cursor</span></span>

### <a name="overview"></a><span data-ttu-id="f18c9-419">總覽</span><span class="sxs-lookup"><span data-stu-id="f18c9-419">Overview</span></span>

<span data-ttu-id="f18c9-420">本節說明一種用戶端的概念，雖然不一定是託管的通訊協定，但應該是任何實用的類別目錄的用戶端實作的一部分。</span><span class="sxs-lookup"><span data-stu-id="f18c9-420">This section describes a client concept that, although is not necessarily mandated by the protocol, should be part of any practical catalog client implementation.</span></span>

<span data-ttu-id="f18c9-421">因為目錄是依時間編制索引的僅附加的資料結構，所以應該儲存在用戶端**游標**最多哪個時間點的用戶端已在本機處理類別目錄項目。</span><span class="sxs-lookup"><span data-stu-id="f18c9-421">Because the catalog is an append-only data structure indexed by time, the client should store a **cursor** locally, representing up to what point in time the client has processed catalog items.</span></span> <span data-ttu-id="f18c9-422">請注意，永遠不會使用用戶端的電腦時鐘會產生此資料指標的值。</span><span class="sxs-lookup"><span data-stu-id="f18c9-422">Note that this cursor value should never be generated using the client's machine clock.</span></span> <span data-ttu-id="f18c9-423">相反地，值應該來自於目錄物件的`commitTimestamp`值。</span><span class="sxs-lookup"><span data-stu-id="f18c9-423">Instead, the value should come from a catalog object's `commitTimestamp` value.</span></span>

<span data-ttu-id="f18c9-424">每次用戶端想要處理封裝來源上的新事件，它需要查詢類別目錄的認可時間戳記的所有目錄項目大於其預存的資料指標。</span><span class="sxs-lookup"><span data-stu-id="f18c9-424">Every time the client wants to process new events on the package source, it need only query the catalog for all catalog items with a commit timestamp greater than its stored cursor.</span></span> <span data-ttu-id="f18c9-425">用戶端已順利處理所有新的類別目錄項目之後，它會記錄只處理做為其新的資料指標值的類別目錄項目的最新的認可時間戳記。</span><span class="sxs-lookup"><span data-stu-id="f18c9-425">After the client successfully processes all new catalog items, it records the latest commit timestamp of catalog items just processed as its new cursor value.</span></span>

<span data-ttu-id="f18c9-426">使用這個方法，用戶端可以確定永遠不會錯過任何發生的套件來源的封裝事件。</span><span class="sxs-lookup"><span data-stu-id="f18c9-426">Using this approach, the client can be sure to never miss any package events that occurred on the package source.</span></span>
<span data-ttu-id="f18c9-427">此外，用戶端永遠不會有重新處理資料指標的已錄製的認可時間戳記之前的舊事件。</span><span class="sxs-lookup"><span data-stu-id="f18c9-427">Additionally, the client never has to reprocess old events prior to the cursor's recorded commit timestamp.</span></span>

<span data-ttu-id="f18c9-428">資料指標的這個功能強大的概念用於許多 nuget.org 背景工作和用來保持 V3 API 本身。</span><span class="sxs-lookup"><span data-stu-id="f18c9-428">This powerful concept of cursors is used for many of nuget.org background jobs and is used to keep the V3 API itself up-to-date.</span></span> 

### <a name="initial-value"></a><span data-ttu-id="f18c9-429">Initial value</span><span class="sxs-lookup"><span data-stu-id="f18c9-429">Initial value</span></span>

<span data-ttu-id="f18c9-430">當目錄用戶端正在開始第一次 （也因此沒有資料指標的值） 時，它應該使用預設資料指標的值。NET 的`System.DateTimeOffset.MinValue`或最小的可代表時間戳記的這類類似概念。</span><span class="sxs-lookup"><span data-stu-id="f18c9-430">When the catalog client is starting for the very first time (and therefore has no cursor value), it should use a default cursor value of .NET's `System.DateTimeOffset.MinValue` or some such analogous notion of minimum representable timestamp.</span></span>

### <a name="iterating-over-catalog-items"></a><span data-ttu-id="f18c9-431">逐一查看目錄項目</span><span class="sxs-lookup"><span data-stu-id="f18c9-431">Iterating over catalog items</span></span>

<span data-ttu-id="f18c9-432">若要查詢的下一個要處理的目錄項目集，用戶端應該：</span><span class="sxs-lookup"><span data-stu-id="f18c9-432">To query for the next set of catalog items to process, the client should:</span></span>

1. <span data-ttu-id="f18c9-433">從本機存放區擷取記錄的資料指標的值。</span><span class="sxs-lookup"><span data-stu-id="f18c9-433">Fetch the recorded cursor value from a local store.</span></span>
1. <span data-ttu-id="f18c9-434">下載並還原序列化的類別目錄索引。</span><span class="sxs-lookup"><span data-stu-id="f18c9-434">Download and deserialize the catalog index.</span></span>
1. <span data-ttu-id="f18c9-435">尋找所有目錄頁面認可時間戳記*大於*資料指標。</span><span class="sxs-lookup"><span data-stu-id="f18c9-435">Find all catalog pages with a commit timestamp *greater than* the cursor.</span></span>
1. <span data-ttu-id="f18c9-436">宣告空白的處理的類別目錄項目清單。</span><span class="sxs-lookup"><span data-stu-id="f18c9-436">Declare an empty list of catalog items to process.</span></span>
1. <span data-ttu-id="f18c9-437">每個類別目錄 頁面的比對在步驟 3:</span><span class="sxs-lookup"><span data-stu-id="f18c9-437">For each catalog page matched in step 3:</span></span>
   1. <span data-ttu-id="f18c9-438">下載並還原序列化 [目錄] 頁面。</span><span class="sxs-lookup"><span data-stu-id="f18c9-438">Download and deserialized the catalog page.</span></span>
   1. <span data-ttu-id="f18c9-439">尋找所有類別目錄項目，認可時間戳記*大於*資料指標。</span><span class="sxs-lookup"><span data-stu-id="f18c9-439">Find all catalog items with a commit timestamp *greater than* the cursor.</span></span>
   1. <span data-ttu-id="f18c9-440">加入在步驟 4 中宣告的清單中的所有相符的目錄項目。</span><span class="sxs-lookup"><span data-stu-id="f18c9-440">Add all matching catalog items to the list declared in step 4.</span></span>
1. <span data-ttu-id="f18c9-441">認可時間戳記排序目錄項目清單。</span><span class="sxs-lookup"><span data-stu-id="f18c9-441">Sort the catalog item list by commit timestamp.</span></span>
1. <span data-ttu-id="f18c9-442">依序處理每個類別目錄項目：</span><span class="sxs-lookup"><span data-stu-id="f18c9-442">Process each catalog item in sequence:</span></span>
   1. <span data-ttu-id="f18c9-443">下載並還原序列化的類別目錄項目。</span><span class="sxs-lookup"><span data-stu-id="f18c9-443">Download and deserialize the catalog item.</span></span>
   1. <span data-ttu-id="f18c9-444">類別目錄項目的型別來做出適當回應。</span><span class="sxs-lookup"><span data-stu-id="f18c9-444">React appropriately to the catalog item's type.</span></span>
   1. <span data-ttu-id="f18c9-445">處理目錄項目文件，以用戶端特定的方式。</span><span class="sxs-lookup"><span data-stu-id="f18c9-445">Process the catalog item document in a client-specific fashion.</span></span>
1. <span data-ttu-id="f18c9-446">記錄最後一個類別目錄項目認可時間戳記做為新的資料指標值。</span><span class="sxs-lookup"><span data-stu-id="f18c9-446">Record the last catalog item's commit timestamp as the new cursor value.</span></span>

<span data-ttu-id="f18c9-447">使用此基本的演算法，用戶端實作可以建置套件來源的完整檢視可用的所有封裝。</span><span class="sxs-lookup"><span data-stu-id="f18c9-447">With this basic algorithm, the client implementation can build up a complete view of all packages available on the package source.</span></span> <span data-ttu-id="f18c9-448">用戶端只需要執行此演算法會定期一律留意套件來源的最新變更。</span><span class="sxs-lookup"><span data-stu-id="f18c9-448">The client need only execute this algorithm periodically to always be aware of the latest changes to the package source.</span></span>

> [!Note]
> <span data-ttu-id="f18c9-449">這是此演算法的 nuget.org 用以保存[套件中繼資料](registration-base-url-resource.md)，[套件內容](package-base-address-resource.md)，[搜尋](search-query-service-resource.md)並[自動完成](search-autocomplete-service-resource.md)最新的資源。</span><span class="sxs-lookup"><span data-stu-id="f18c9-449">This is the algorithm that nuget.org uses to keep the [Package Metadata](registration-base-url-resource.md), [Package Content](package-base-address-resource.md), [Search](search-query-service-resource.md) and [Autocomplete](search-autocomplete-service-resource.md) resources up to date.</span></span>

### <a name="dependent-cursors"></a><span data-ttu-id="f18c9-450">相依的資料指標</span><span class="sxs-lookup"><span data-stu-id="f18c9-450">Dependent cursors</span></span>

<span data-ttu-id="f18c9-451">假設有兩個具有固有的相依性，其中一部用戶端的輸出取決於另一個用戶端的輸出目錄用戶端。</span><span class="sxs-lookup"><span data-stu-id="f18c9-451">Suppose there are two catalog clients that have an inherent dependency where one client's output depends on another client's output.</span></span> 

#### <a name="example"></a><span data-ttu-id="f18c9-452">範例</span><span class="sxs-lookup"><span data-stu-id="f18c9-452">Example</span></span>

<span data-ttu-id="f18c9-453">比方說，在 nuget.org 上的新發行的封裝不應該出現在搜尋資源之前它會出現在套件中繼資料資源。</span><span class="sxs-lookup"><span data-stu-id="f18c9-453">For example, on nuget.org a newly published package should not appear in the search resource before it appears in the package metadata resource.</span></span> <span data-ttu-id="f18c9-454">這是因為在官方的 NuGet 用戶端執行的 「 還原 」 作業會使用套件中繼資料資源。</span><span class="sxs-lookup"><span data-stu-id="f18c9-454">This is because the "restore" operation performed by the official NuGet client uses the package metadata resource.</span></span> <span data-ttu-id="f18c9-455">如果客戶會發現使用搜尋服務套件，它們應該能夠成功還原該套件，套件中繼資料資源。</span><span class="sxs-lookup"><span data-stu-id="f18c9-455">If a customer discovers a package using the search service, they should be able to successfully restore that package using the package metadata resource.</span></span> <span data-ttu-id="f18c9-456">也就是說，搜尋資源套件中繼資料資源而定。</span><span class="sxs-lookup"><span data-stu-id="f18c9-456">In other words, the search resource depends on the package metadata resource.</span></span> <span data-ttu-id="f18c9-457">每個資源都更新該資源的類別目錄的用戶端背景工作。</span><span class="sxs-lookup"><span data-stu-id="f18c9-457">Each resource has a catalog client background job updating that resource.</span></span> <span data-ttu-id="f18c9-458">每個用戶端有它自己的資料指標。</span><span class="sxs-lookup"><span data-stu-id="f18c9-458">Each client has its own cursor.</span></span>

<span data-ttu-id="f18c9-459">因為這兩個資源是從類別目錄中，更新搜尋資源的類別目錄用戶端資料指標*必須不超過*套件中繼資料目錄用戶端資料指標。</span><span class="sxs-lookup"><span data-stu-id="f18c9-459">Since both resources are built off of the catalog, the cursor of the catalog client that updates the search resource *must not go beyond* the cursor of the package metadata catalog client.</span></span>

#### <a name="algorithm"></a><span data-ttu-id="f18c9-460">演算法</span><span class="sxs-lookup"><span data-stu-id="f18c9-460">Algorithm</span></span>

<span data-ttu-id="f18c9-461">若要實作這項限制，只需修改為上述的演算法：</span><span class="sxs-lookup"><span data-stu-id="f18c9-461">To implement this restriction, simply modify the algorithm above to be:</span></span>

1. <span data-ttu-id="f18c9-462">從本機存放區擷取記錄的資料指標的值。</span><span class="sxs-lookup"><span data-stu-id="f18c9-462">Fetch the recorded cursor value from a local store.</span></span>
1. <span data-ttu-id="f18c9-463">下載並還原序列化的類別目錄索引。</span><span class="sxs-lookup"><span data-stu-id="f18c9-463">Download and deserialize the catalog index.</span></span>
1. <span data-ttu-id="f18c9-464">尋找所有目錄頁面認可時間戳記*大於*游標**小於或等於相依性的資料指標。**</span><span class="sxs-lookup"><span data-stu-id="f18c9-464">Find all catalog pages with a commit timestamp *greater than* the cursor **less than or equal to the dependency's cursor.**</span></span>
1. <span data-ttu-id="f18c9-465">宣告空白的處理的類別目錄項目清單。</span><span class="sxs-lookup"><span data-stu-id="f18c9-465">Declare an empty list of catalog items to process.</span></span>
1. <span data-ttu-id="f18c9-466">每個類別目錄 頁面的比對在步驟 3:</span><span class="sxs-lookup"><span data-stu-id="f18c9-466">For each catalog page matched in step 3:</span></span>
   1. <span data-ttu-id="f18c9-467">下載並還原序列化 [目錄] 頁面。</span><span class="sxs-lookup"><span data-stu-id="f18c9-467">Download and deserialized the catalog page.</span></span>
   1. <span data-ttu-id="f18c9-468">尋找所有類別目錄項目，認可時間戳記*大於*游標**小於或等於相依性的資料指標。**</span><span class="sxs-lookup"><span data-stu-id="f18c9-468">Find all catalog items with a commit timestamp *greater than* the cursor **less than or equal to the dependency's cursor.**</span></span>
   1. <span data-ttu-id="f18c9-469">加入在步驟 4 中宣告的清單中的所有相符的目錄項目。</span><span class="sxs-lookup"><span data-stu-id="f18c9-469">Add all matching catalog items to the list declared in step 4.</span></span>
1. <span data-ttu-id="f18c9-470">認可時間戳記排序目錄項目清單。</span><span class="sxs-lookup"><span data-stu-id="f18c9-470">Sort the catalog item list by commit timestamp.</span></span>
1. <span data-ttu-id="f18c9-471">依序處理每個類別目錄項目：</span><span class="sxs-lookup"><span data-stu-id="f18c9-471">Process each catalog item in sequence:</span></span>
   1. <span data-ttu-id="f18c9-472">下載並還原序列化的類別目錄項目。</span><span class="sxs-lookup"><span data-stu-id="f18c9-472">Download and deserialize the catalog item.</span></span>
   1. <span data-ttu-id="f18c9-473">類別目錄項目的型別來做出適當回應。</span><span class="sxs-lookup"><span data-stu-id="f18c9-473">React appropriately to the catalog item's type.</span></span>
   1. <span data-ttu-id="f18c9-474">處理目錄項目文件，以用戶端特定的方式。</span><span class="sxs-lookup"><span data-stu-id="f18c9-474">Process the catalog item document in a client-specific fashion.</span></span>
1. <span data-ttu-id="f18c9-475">記錄最後一個類別目錄項目認可時間戳記做為新的資料指標值。</span><span class="sxs-lookup"><span data-stu-id="f18c9-475">Record the last catalog item's commit timestamp as the new cursor value.</span></span>

<span data-ttu-id="f18c9-476">使用這個修改過的演算法，您可以建立一個系統相依的類別目錄的用戶端的所有產生自己的特定索引、 成品等。</span><span class="sxs-lookup"><span data-stu-id="f18c9-476">Using this modified algorithm, you can build a system of dependent catalog clients all producing their own specific indexes, artifacts, etc.</span></span>
